<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:fragment="head">
    <meta charset="UTF-8">
    <title>DBOO'S_LOG</title>
    <link rel="stylesheet" th:href="@{/style.css}">
    <script th:src="@{/common.js}"></script>
</head>

<body>

<div class="container">
    <header th:replace="~{fragments::header}"></header>

    <main>
        <!-- Comments Page -->
        <section id="comments">
            <h2>방명록 남기기</h2>
            <form>
                <input type="text" id="name" placeholder="Your Name">
                <input type="email" id="email" placeholder="Your Email">
                <textarea id="comment" rows="10" cols="50" placeholder="Your Comment"></textarea>
                <button type="submit" onclick="saveComment(); location.href='/visit?'"> 남기기! </button>
            </form>
            <h2>방명록</h2>
            <p>This is a section where visitors can leave comments about our website.</p>
            <section th:each="comment : ${comments}">
                <h3 th:text="${comment.name}"></h3>
                <p th:text="${comment.comment}"></p>
            </section>

        </section>
    </main>

    <footer th:replace="~{fragments::footer}"></footer>
</div>
</body>

<script>

    function saveComment() {
        let uri = '/api/v1/comment';
        let name = document.getElementById('name').value;
        let email = document.getElementById('email').value;
        let comment = document.getElementById('comment').value;
        let data = {
            'name' : name,
            'email' : email,
            'comment' : comment
        };
        postData(uri, data).then();
    }


</script>
</html>

